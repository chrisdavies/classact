var app=function(){var t={ngRoute:!0,ngResource:!0};return{module:function(e){return t[e]?angular.module(e):(t[e]=!0,angular.module(e,[]))},initialize:function(){angular.module("app",Object.keys(t)).config(["$routeProvider",function(t){t.otherwise({controller:"Error404Ctrl",templateUrl:"/errors/404/error-404.html"})}])}}}();app.module("appAssignments").config(["$routeProvider",function(t){var e={templateUrl:"/assignments/assignments.html",controller:"AssignmentsCtrl",resolve:{usernames:["StudentsStore",function(t){return t.loadUsernames()}]}};t.when("/assignments/:assignment",e),t.when("/assignments",e)}]).controller("AssignmentsCtrl",["$scope","Students","usernames","Repos","$q","$log","$routeParams","$location",function(t,e,n,r,u,s,o,a){function c(){e.query({usernames:n}).then(function(e){u.all(e.map(function(t){return r.get({username:t.username,repo:i.name}).then(function(e){return t.repo=e,t}).catch(function(e){return s.log(e),t})})).then(function(e){t.students=e})})}var i=t.assignment={name:o.assignment||"","goto":function(){a.path("/assignments/"+i.name)}};i.name&&c()}]),app.module("directives").directive("focusOn",function(){return function(t,e,n){t.$on(n.focusOn,function(){e[0].focus()})}}),app.module("services").factory("LocalStore",["$q",function(t){var e={save:function(e,n){return t(function(t,r){try{localStorage.setItem(e,JSON.stringify(n)),t(n)}catch(u){r(u)}})},load:function(e){return t(function(t,n){try{var r=JSON.parse(localStorage.getItem(e));return r?t(r):n(e)}catch(u){n(u)}})}};return e}]),app.module("services").factory("Repos",["$resource","$q",function(t){var e=t("https://api.github.com/repos/:username/:repo");return{get:function(t){return e.get(t).$promise.then(function(e){return{hasPages:e.has_pages,htmlUrl:e.html_url,ghPagesUrl:"http://"+t.username+".github.io/"+t.repo}})}}}]),app.module("services").factory("Students",["$resource","$q","$log",function(t,e,n){var r=t("https://api.github.com/users/:username");return r.query=function(t){return e.all((t.usernames||[]).map(function(t){return r.get({username:t}).$promise.then(function(t){return{name:t.name,username:t.login,htmlUrl:t.html_url,avatarUrl:t.avatar_url}}).catch(function(e){return n.log(e),{login:t}})}))},r.events=function(e){return t("https://api.github.com/users/:username/events").query(e).$promise.then(function(t){return t.map(function(t){return{createdAt:t.created_at}})})},r}]),app.module("services").factory("StudentsStore",["LocalStore","$log",function(t,e){var n="studentInfo.usernames",r={saveUsernames:function(e){return t.save(n,e)},loadUsernames:function(){return t.load(n).catch(function(t){return e.log(t),[]})}};return r}]),app.module("factories").factory("StringUtil",function(){return{startsWith:function(t,e){return t=t||"",t.slice(0,e.length)===e}}}),app.module("appErrors").controller("Error404Ctrl",["$scope","$location",function(t,e){t.message="Could not find: "+e.url()}]),app.module("master").controller("MainNavCtrl",["$scope","$document","$location","StringUtil",function(t,e,n,r){e.prop("title","TIYGH"),t.isActive=function(t){return"/"===t?"/"===n.path():r.startsWith(n.path(),t)}}]),app.module("appStats").config(["$routeProvider",function(t){var e={templateUrl:"/stats/stats.html",controller:"StatsCtrl",resolve:{students:["StudentsStore","Students","$log","$q",function(t,e,n,r){return t.loadUsernames().then(function(t){return e.query({usernames:t})}).then(function(t){return r.all(t.map(function(t){return e.events(t).then(function(e){return t.events=e,t.latestEvent=e.length?e[0]:void 0,t}).catch(function(e){return n.log(e),t})}))})}]}};t.when("/",e),t.when("/stats",e)}]).controller("StatsCtrl",["$scope","students",function(t,e){t.studentInfo={students:e}}]),app.module("appStudents").config(["$routeProvider",function(t){t.when("/students",{templateUrl:"/students/students.html",controller:"StudentsCtrl",resolve:{usernames:["StudentsStore",function(t){return t.loadUsernames()}]}})}]).controller("StudentsCtrl",["$scope","$log","StudentsStore","Students","usernames",function(t,e,n,r,u){t.studentInfo={usernames:u},t.students=[],t.$watch("studentInfo.usernames",function(){return r.query({usernames:t.studentInfo.usernames}).then(function(e){return t.students=e,n.saveUsernames(t.studentInfo.usernames)})},!0),t.removeStudent=function(e){t.studentInfo.usernames=t.studentInfo.usernames.filter(function(t){return t!==e.login})}}]).controller("AddStudentCtrl",["$scope","Students",function(t){t.username="",t.addStudent=function(){t.studentInfo.usernames.some(function(e){return e===t.username})||t.studentInfo.usernames.push(t.username),t.username="",t.$emit("username-added")}}]);